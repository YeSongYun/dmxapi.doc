# Gemini PDF å†…å®¹æ€»ç»“ API æ–‡æ¡£

## ğŸ“– åŠŸèƒ½ä»‹ç»

é€šè¿‡è°ƒç”¨ Gemini API å¯¹ PDF æ–‡æ¡£è¿›è¡Œæ™ºèƒ½å†…å®¹æ€»ç»“,æ”¯æŒå¤šé¡µæ–‡æ¡£çš„å®Œæ•´è§£æå’Œæå–ã€‚



## ğŸ’» Python è°ƒç”¨ç¤ºä¾‹

```python
"""
PDF æ™ºèƒ½æ€»ç»“å·¥å…·
=================
åŠŸèƒ½è¯´æ˜ï¼šé€šè¿‡è°ƒç”¨ DMXAPI Gemini API å¯¹ PDF æ–‡æ¡£è¿›è¡Œæ™ºèƒ½å†…å®¹æ€»ç»“
ä½œè€…ï¼šDMX API Team
"""

import base64
import requests
import json

# ==================== API é…ç½® ====================
API_URL = "https://www.dmxapi.cn/v1beta/models/gemini-2.5-flash:generateContent"  #DMXAPI Gemini API ç«¯ç‚¹
API_KEY = "sk-*****************************************"  # ä½ çš„ DMXAPI å¯†é’¥ï¼ˆè¯·å¦¥å–„ä¿ç®¡ï¼‰
PDF_PATH = "test/example.pdf"  # å¾…å¤„ç†çš„ PDF æ–‡ä»¶è·¯å¾„

def encode_file_to_base64(file_path):
    """
    å°†æ–‡ä»¶ç¼–ç ä¸º Base64 å­—ç¬¦ä¸²
    
    å‚æ•°:
        file_path (str): æ–‡ä»¶çš„å®Œæ•´è·¯å¾„
    
    è¿”å›:
        str: Base64 ç¼–ç åçš„å­—ç¬¦ä¸²ï¼Œå¤±è´¥åˆ™è¿”å› None
    """
    try:
        # ä»¥äºŒè¿›åˆ¶æ¨¡å¼è¯»å–æ–‡ä»¶å†…å®¹
        with open(file_path, "rb") as file:
            # å°†äºŒè¿›åˆ¶æ•°æ®ç¼–ç ä¸º Base64 å¹¶è½¬æ¢ä¸º UTF-8 å­—ç¬¦ä¸²
            return base64.b64encode(file.read()).decode("utf-8")
    except Exception as e:
        print(f"âŒ æ–‡ä»¶å¤„ç†é”™è¯¯: {e}")
        return None

def summarize_pdf():
    """
    è°ƒç”¨ DMXAPI Gemini API æ€»ç»“ PDF æ–‡æ¡£å†…å®¹
    
    æµç¨‹:
        1. è¯»å–å¹¶ç¼–ç  PDF æ–‡ä»¶ä¸º Base64 æ ¼å¼
        2. æ„é€ ç¬¦åˆ API è§„èŒƒçš„è¯·æ±‚æ•°æ®
        3. å‘é€ POST è¯·æ±‚å¹¶è¾“å‡ºç»“æœ
    """
    # ==================== ç¬¬ä¸€æ­¥ï¼šè¯»å–å¹¶ç¼–ç  PDF æ–‡ä»¶ ====================
    print("ğŸ“„ æ­£åœ¨è¯»å– PDF æ–‡ä»¶...")
    base64_data = encode_file_to_base64(PDF_PATH)
    if not base64_data:
        print("âŒ PDF æ–‡ä»¶è¯»å–å¤±è´¥ï¼Œç¨‹åºç»ˆæ­¢")
        return

    # ==================== ç¬¬äºŒæ­¥ï¼šå‡†å¤‡è¯·æ±‚æ•°æ® ====================
    print("ğŸ”§ æ­£åœ¨æ„é€  API è¯·æ±‚æ•°æ®...")
    headers = {
        "Content-Type": "application/json"  # è®¾ç½®è¯·æ±‚å¤´ä¸º JSON æ ¼å¼
    }
    
    # æ„é€ ç¬¦åˆ Gemini API è§„èŒƒçš„è¯·æ±‚ä½“
    payload = {
        "contents": [{
            "parts": [
                # PDF æ–‡ä»¶æ•°æ®éƒ¨åˆ†ï¼ˆBase64 æ ¼å¼ï¼‰
                {
                    "inlineData": {
                        "mimeType": "application/pdf",  # æŒ‡å®šæ–‡ä»¶ç±»å‹ä¸º PDF
                        "data": base64_data  # Base64 ç¼–ç çš„ PDF æ•°æ®
                    }
                },
                # ç”¨æˆ·æç¤ºè¯éƒ¨åˆ†
                {
                    "text": "è¯·æ€»ç»“è¿™ä»½PDFçš„æ ¸å¿ƒå†…å®¹ï¼Œæ¸…æ™°ç®€æ´è¡¨è¾¾ï¼Œä¸è¦å•°å—¦ã€‚"
                }
            ]
        }]
    }

    # ==================== ç¬¬ä¸‰æ­¥ï¼šå‘é€è¯·æ±‚å¹¶å¤„ç†å“åº” ====================
    print("ğŸš€ æ­£åœ¨è°ƒç”¨ Gemini API...")
    try:
        # å‘é€ POST è¯·æ±‚åˆ° API ç«¯ç‚¹
        response = requests.post(
            API_URL,
            headers=headers,
            params={"key": API_KEY},  # é€šè¿‡ URL å‚æ•°ä¼ é€’ API å¯†é’¥
            json=payload  # å°† payload åºåˆ—åŒ–ä¸º JSON å¹¶å‘é€
        )
        
        # æ£€æŸ¥å“åº”çŠ¶æ€ï¼Œå¦‚æœä¸æ˜¯ 2xx åˆ™æŠ›å‡ºå¼‚å¸¸
        response.raise_for_status()
        
        # æ ¼å¼åŒ–è¾“å‡º API è¿”å›çš„ JSON ç»“æœ
        print("âœ… API è°ƒç”¨æˆåŠŸï¼ä»¥ä¸‹æ˜¯æ€»ç»“ç»“æœï¼š")
        print("=" * 60)
        print(json.dumps(response.json(), indent=2, ensure_ascii=False))
        print("=" * 60)
        
    except requests.exceptions.RequestException as e:
        # æ•è·æ‰€æœ‰è¯·æ±‚ç›¸å…³çš„å¼‚å¸¸
        print(f"âŒ API è¯·æ±‚å¤±è´¥: {e}")
        if e.response:
            # å¦‚æœæœ‰å“åº”å¯¹è±¡ï¼Œè¾“å‡ºè¯¦ç»†é”™è¯¯ä¿¡æ¯
            print(f"ğŸ“‹ é”™è¯¯è¯¦æƒ…: {e.response.text}")

# ==================== ç¨‹åºå…¥å£ ====================
if __name__ == "__main__":
    print("=" * 60)
    print("ğŸ“š PDF æ™ºèƒ½æ€»ç»“å·¥å…· - åŸºäº Gemini API")
    print("=" * 60 + "")
    summarize_pdf()
```



## âœ… è¿”å›ç¤ºä¾‹

```json
============================================================
ğŸ“š PDF æ™ºèƒ½æ€»ç»“å·¥å…· - åŸºäº Gemini API
============================================================
ğŸ“„ æ­£åœ¨è¯»å– PDF æ–‡ä»¶...
ğŸ”§ æ­£åœ¨æ„é€  API è¯·æ±‚æ•°æ®...
ğŸš€ æ­£åœ¨è°ƒç”¨ Gemini API...
âœ… API è°ƒç”¨æˆåŠŸï¼ä»¥ä¸‹æ˜¯æ€»ç»“ç»“æœï¼š
============================================================
{
  "candidates": [
    {
      "content": {
        "role": "model",
        "parts": [
          {
            "text": "è¿™ä»½PDFçš„æ ¸å¿ƒå†…å®¹æ˜¯**æ¥è‡ªã€Šåœ£ç»ã€‹ç®´è¨€ä¹¦23:4-5èŠ‚çš„ç»æ–‡ç¿»è¯‘**ã€‚è¯¥ç»æ–‡è­¦ç¤ºäººä»¬ä¸è¦è¿‡åº¦è¿½æ±‚è´¢å¯Œï¼Œå› ä¸ºè´¢å¯Œæ˜¯çŸ­æš‚çš„ï¼Œä¼šåƒé¹°ä¸€æ ·é£èµ°ã€‚PDFæä¾›äº†åŒ…æ‹¬è‹±è¯­ã€ä¿„è¯­ã€äºšç¾å°¼äºšè¯­ã€è¥¿ç­ç‰™è¯­ã€åŠ æ³°ç½—å°¼äºšè¯­ã€æ³•è¯­ã€å¾·è¯­ã€ç®€ä½“ä¸­æ–‡ã€å°åœ°è¯­ã€è‘¡è„ç‰™è¯­ã€æ—¥è¯­ã€éŸ©è¯­ã€æ„å¤§åˆ©è¯­ã€åœŸè€³å…¶è¯­å’Œè¶Šå—è¯­åœ¨å†…çš„å¤šç§è¯­è¨€ç‰ˆæœ¬ã€‚"
          }
        ]
      },
      "finishReason": "STOP",
      "index": 0,
      "safetyRatings": []
    }
  ],
  "usageMetadata": {
    "promptTokenCount": 789,
    "candidatesTokenCount": 110,
    "totalTokenCount": 899,
    "thoughtsTokenCount": 0,
    "promptTokensDetails": null
  }
}
============================================================
```



## ğŸ”‘ å…³é”®å‚æ•°è¯´æ˜

### API é…ç½®
- **API_URL**: DMXAPI Gemini API ç«¯ç‚¹åœ°å€
- **API_KEY**: ä½ çš„ API å¯†é’¥ï¼ˆè¯·å¦¥å–„ä¿ç®¡ï¼‰
- **PDF_PATH**: å¾…å¤„ç†çš„ PDF æ–‡ä»¶è·¯å¾„

### è¯·æ±‚å‚æ•°
- **mimeType**: æ–‡ä»¶ç±»å‹ï¼ŒPDF æ–‡ä»¶ä½¿ç”¨ `application/pdf`
- **data**: Base64 ç¼–ç çš„æ–‡ä»¶æ•°æ®
- **text**: ç”¨æˆ·æç¤ºè¯ï¼ŒæŒ‡å¯¼æ¨¡å‹å¦‚ä½•å¤„ç†æ–‡æ¡£

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ–‡ä»¶å¤§å°é™åˆ¶**: æ”¯æŒä¸è¶…è¿‡ 50MB æˆ– 1,000 é¡µçš„ PDF æ–‡ä»¶
2. **æ”¯æŒæ ¼å¼**: ä»…æ”¯æŒæ ‡å‡† PDF æ ¼å¼æ–‡æ¡£
3. **API å¯†é’¥å®‰å…¨**: ä¸è¦åœ¨å…¬å¼€ä»£ç ä¸­æš´éœ² API å¯†é’¥
4. **é”™è¯¯å¤„ç†**: å»ºè®®æ·»åŠ å®Œå–„çš„å¼‚å¸¸å¤„ç†æœºåˆ¶
5. **ç¼–ç æ ¼å¼**: ç¡®ä¿ä½¿ç”¨ Base64 ç¼–ç ä¼ è¾“æ–‡ä»¶æ•°æ®

## ğŸ’¡ ä½¿ç”¨å»ºè®®

- å¯¹äºå¤§å‹ PDF æ–‡æ¡£ï¼Œå»ºè®®åˆ†é¡µå¤„ç†
- å¯ä»¥è‡ªå®šä¹‰æç¤ºè¯ä»¥è·å¾—æ›´ç²¾å‡†çš„æ€»ç»“
- æ”¯æŒå¤šè¯­è¨€ PDF æ–‡æ¡£çš„å†…å®¹æå–
- å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ·»åŠ é‡è¯•æœºåˆ¶

---

<p align="center">
  <small>Â© 2025 DMXAPI Gemini PDF</small>
</p>