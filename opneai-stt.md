# OpenAI è¯­éŸ³è½¬æ–‡æœ¬ API æ–‡æ¡£

> STT (Speech-to-Text) / ASR (Automatic Speech Recognition) è¯­éŸ³è¯†åˆ«æœåŠ¡

## ğŸ“¡ æ¥å£åœ°å€

| æœåŠ¡ç±»å‹ | æ¥å£åœ°å€ | è¯´æ˜ |
|---------|---------|------|
| éŸ³é¢‘ç¿»è¯‘ | `https://www.dmxapi.cn/v1/audio/translations` | å°†éŸ³é¢‘ç¿»è¯‘æˆè‹±æ–‡ |
| éŸ³é¢‘è½¬å†™ | `https://www.dmxapi.cn/v1/audio/transcriptions` | å°†éŸ³é¢‘è½¬å†™ä¸ºç¹ä½“ä¸­æ–‡ |

## ğŸ¤– æ¨¡å‹åç§°

`whisper-1`



## ğŸ¯ Python éŸ³é¢‘ç¿»è¯‘ç¤ºä¾‹

### åŠŸèƒ½è¯´æ˜
ä½¿ç”¨ Whisper æ¨¡å‹å°†éŸ³é¢‘æ–‡ä»¶ç¿»è¯‘æˆè‹±æ–‡

### ä»£ç ç¤ºä¾‹
```python
"""
éŸ³é¢‘ç¿»è¯‘ API è°ƒç”¨è„šæœ¬
ä½¿ç”¨ Whisper æ¨¡å‹å°†éŸ³é¢‘æ–‡ä»¶ç¿»è¯‘æˆè‹±æ–‡
"""

import requests
import os
import json

# ==================== é…ç½®éƒ¨åˆ† ====================

# ä»ç¯å¢ƒå˜é‡è·å– API å¯†é’¥(å¯é€‰,å½“å‰ä»£ç ä¸­ä½¿ç”¨ç¡¬ç¼–ç çš„å¯†é’¥)
api_key = os.getenv("OPENAI_API_KEY")

# DMXAPI ç«¯ç‚¹åœ°å€ - éŸ³é¢‘ç¿»è¯‘æœåŠ¡
url = "https://www.dmxapi.cn/v1/audio/translations"

# è¯·æ±‚å¤´é…ç½® - åŒ…å«èº«ä»½éªŒè¯ä¿¡æ¯
headers = {
    "Authorization": f"sk-********************************" # è¯·æ›¿æ¢ä¸ºä½ çš„DMXAPIçœŸå®å¯†é’¥
}

# å¾…ç¿»è¯‘çš„éŸ³é¢‘æ–‡ä»¶è·¯å¾„
audio_file_path = "test/output_20251104_113808.mp3"

# ==================== å‘é€è¯·æ±‚ ====================

# ä»¥äºŒè¿›åˆ¶åªè¯»æ¨¡å¼æ‰“å¼€éŸ³é¢‘æ–‡ä»¶
with open(audio_file_path, "rb") as audio_file:
    # æ„å»º multipart/form-data æ ¼å¼çš„æ–‡ä»¶æ•°æ®
    files = {
        "file": audio_file,              # éŸ³é¢‘æ–‡ä»¶å¯¹è±¡(æ”¯æŒ flac, mp3, mp4, mpeg, mpga, m4a, ogg, wav, or webm)
        "model": (None, "whisper-1"),    # ä½¿ç”¨çš„æ¨¡å‹åç§°
    }
    
    # å‘é€ POST è¯·æ±‚åˆ°ç¿»è¯‘ API
    response = requests.post(url, headers=headers, files=files)

# ==================== å¤„ç†å“åº” ====================

# æ‰“å°å“åº”çš„åŸºæœ¬ä¿¡æ¯
print(f"çŠ¶æ€ç : {response.status_code}")
print("=" * 50)
print("å“åº”å†…å®¹:")
print("=" * 50)

# å¦‚æœè¯·æ±‚æˆåŠŸ(çŠ¶æ€ç  200),å°è¯•è§£æ JSON å“åº”
if response.status_code == 200:
    try:
        # è§£æå¹¶ä»¥æ ¼å¼åŒ–çš„ JSON æ ¼å¼æ‰“å°å“åº”æ•°æ®
        response_data = response.json()
        print(json.dumps(response_data, ensure_ascii=False, indent=2))
    except requests.exceptions.JSONDecodeError:
        # å¦‚æœå“åº”ä¸æ˜¯æœ‰æ•ˆçš„ JSON æ ¼å¼,è¾“å‡ºåŸå§‹æ–‡æœ¬
        print(f"å“åº”ä¸æ˜¯ JSON æ ¼å¼:")
        print(response.text)
else:
    # å¦‚æœè¯·æ±‚å¤±è´¥,ä¹Ÿå°è¯•æ ¼å¼åŒ–è¾“å‡ºé”™è¯¯ä¿¡æ¯
    try:
        error_data = response.json()
        print(json.dumps(error_data, ensure_ascii=False, indent=2))
    except:
        print(response.text)
```
### ğŸ“Š è¿”å›ç¤ºä¾‹
```json
çŠ¶æ€ç : 200
==================================================
å“åº”å†…å®¹:
==================================================
{
  "text": "Hello, Oliver Smith. I am your smart virtual assistant, Max. Thank you for calling. I have found your file. The phone number is 14154-159921. The balance is 1234.56 yuan. The related IP address is 192.168.1.1. Your next payment date is May 6, 2032. If you have any questions, please contact support-vip at technet.com."
}
```


## ğŸ¯ Python éŸ³é¢‘è½¬å†™ç¤ºä¾‹

### åŠŸèƒ½è¯´æ˜
ä½¿ç”¨ Whisper æ¨¡å‹å°†éŸ³é¢‘æ–‡ä»¶è½¬å†™ä¸ºæ–‡å­—

### ä»£ç ç¤ºä¾‹
```python
"""
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ éŸ³é¢‘è½¬å†™ API è°ƒç”¨è„šæœ¬                                        â”‚
â”‚ åŠŸèƒ½: ä½¿ç”¨ Whisper æ¨¡å‹å°†éŸ³é¢‘æ–‡ä»¶è½¬å†™ä¸ºæ–‡å­—                   â”‚
â”‚ API: DMXAPI - Whisper éŸ³é¢‘è½¬å†™æœåŠ¡                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
"""

import requests
import os
import json

# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘                         é…ç½®éƒ¨åˆ†                           â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# ã€API å¯†é’¥é…ç½®ã€‘
# ä»ç¯å¢ƒå˜é‡è·å– API å¯†é’¥(æ¨èä½¿ç”¨ç¯å¢ƒå˜é‡ä»¥ä¿æŠ¤å¯†é’¥å®‰å…¨)
api_key = os.getenv("OPENAI_API_KEY")

# ã€API ç«¯ç‚¹é…ç½®ã€‘
# DMXAPI éŸ³é¢‘è½¬å†™æœåŠ¡åœ°å€
url = "https://www.dmxapi.cn/v1/audio/transcriptions"

# ã€è¯·æ±‚å¤´é…ç½®ã€‘
# åŒ…å« Token èº«ä»½éªŒè¯ä¿¡æ¯
headers = {
    "Authorization": f"sk-*******************************************"  # âš ï¸ è¯·æ›¿æ¢ä¸ºä½ çš„DMXAPIçœŸå® API å¯†é’¥
}

# ã€éŸ³é¢‘æ–‡ä»¶é…ç½®ã€‘
# å¾…è½¬å†™çš„éŸ³é¢‘æ–‡ä»¶è·¯å¾„(æ”¯æŒ flac, mp3, mp4, mpeg, mpga, m4a, ogg, wav, or webm)
audio_file_path = "test/output_20251104_113808.mp3"

# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘                      å‘é€ API è¯·æ±‚                         â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# ã€æ–‡ä»¶ä¸Šä¼ ä¸è¯·æ±‚ã€‘
# ä»¥äºŒè¿›åˆ¶åªè¯»æ¨¡å¼æ‰“å¼€éŸ³é¢‘æ–‡ä»¶
with open(audio_file_path, "rb") as audio_file:
    # æ„å»º multipart/form-data æ ¼å¼çš„æ–‡ä»¶æ•°æ®
    files = {
        "file": audio_file,              # éŸ³é¢‘æ–‡ä»¶äºŒè¿›åˆ¶æµ
        "model": (None, "whisper-1"),    # æŒ‡å®šä½¿ç”¨ Whisper-1 æ¨¡å‹
    }
    
    # å‘é€ POST è¯·æ±‚åˆ°éŸ³é¢‘è½¬å†™ API
    response = requests.post(url, headers=headers, files=files)

# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘                      å¤„ç† API å“åº”                         â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# ã€è¾“å‡ºåŸºæœ¬ä¿¡æ¯ã€‘
print(f"ğŸ“Š HTTP çŠ¶æ€ç : {response.status_code}")
print("=" * 60)
print("ğŸ“„ å“åº”å†…å®¹:")
print("=" * 60)

# ã€æˆåŠŸå“åº”å¤„ç†ã€‘
# å¦‚æœè¯·æ±‚æˆåŠŸ(HTTP 200),è§£æå¹¶æ ¼å¼åŒ–è¾“å‡º JSON æ•°æ®
if response.status_code == 200:
    try:
        # è§£æ JSON å“åº”æ•°æ®
        response_data = response.json()
        # æ ¼å¼åŒ–è¾“å‡º,ä¿ç•™ä¸­æ–‡å­—ç¬¦,ç¼©è¿› 2 ä¸ªç©ºæ ¼
        print(json.dumps(response_data, ensure_ascii=False, indent=2))
    except requests.exceptions.JSONDecodeError:
        # å¦‚æœå“åº”ä¸æ˜¯æœ‰æ•ˆçš„ JSON æ ¼å¼,è¾“å‡ºåŸå§‹æ–‡æœ¬
        print("âš ï¸ å“åº”ä¸æ˜¯ JSON æ ¼å¼:")
        print(response.text)
else:
    # ã€é”™è¯¯å“åº”å¤„ç†ã€‘
    # å¦‚æœè¯·æ±‚å¤±è´¥,å°è¯•æ ¼å¼åŒ–è¾“å‡ºé”™è¯¯ä¿¡æ¯
    try:
        error_data = response.json()
        print("âŒ é”™è¯¯è¯¦æƒ…:")
        print(json.dumps(error_data, ensure_ascii=False, indent=2))
    except:
        # å¦‚æœé”™è¯¯å“åº”ä¹Ÿä¸æ˜¯ JSON æ ¼å¼,ç›´æ¥è¾“å‡ºåŸå§‹æ–‡æœ¬
        print("âŒ è¯·æ±‚å¤±è´¥,åŸå§‹å“åº”:")
        print(response.text)
```
### ğŸ“Š è¿”å›ç¤ºä¾‹
```json
ğŸ“Š HTTP çŠ¶æ€ç : 200
============================================================
ğŸ“„ å“åº”å†…å®¹:
============================================================
{
  "text": "æ‚¨å¥½,Oliver Smith,æˆ‘æ˜¯æ‚¨çš„æ™ºèƒ½è™›æ“¬åŠ©æ‰‹,Max,æ„Ÿè¬æ‚¨çš„ä¾†é›»,æˆ‘å·²æ‰¾åˆ°æ‚¨çš„æª”æ¡ˆ,é›»è©±è™Ÿç¢¼14154-159921çš„æœªä»˜æ¸…é¤˜é¡ç‚º1234.56å…ƒ,é—œè¯çš„IPåœ°å€æ˜¯192.168.1.1,æ‚¨çš„ä¸‹ä¸€å€‹ä»˜æ¬¾åˆ°7æ—¥,æ˜¯2032å¹´5æœˆ6æ—¥,å¦‚æœ‰ä»»ä½•ç–‘å•,è«‹è¯ç¹«support-vip at technet.comã€‚ å¤šè¬æ‚¨æ”¶ç‡æ™‚å±€æ–°è,å†æœƒ!"
}    
```


## âš ï¸ æ³¨æ„äº‹é¡¹

- **æ–‡ä»¶å¤§å°é™åˆ¶**: éŸ³é¢‘æ–‡ä»¶å¤§å°å»ºè®®ä¸è¶…è¿‡ 25MB
- **æ”¯æŒè¯­è¨€**: æ”¯æŒä¸­æ–‡ã€è‹±æ–‡ç­‰å¤šç§è¯­è¨€
- **å®‰å…¨æé†’**: è¯·å¦¥å–„ä¿ç®¡ API å¯†é’¥,åˆ‡å‹¿æ³„éœ²æˆ–æäº¤åˆ°å…¬å…±ä»£ç ä»“åº“

---

<p align="center">
  <small>Â© 2025 DMXAPI OpenAI STT</small>
</p>