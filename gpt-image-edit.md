# OpenAI GPT å›¾ç‰‡ç¼–è¾‘ API æ–‡æ¡£

## ğŸ“¡ è¯·æ±‚åœ°å€

```
https://www.dmxapi.cn/v1/images/edits
```

## ğŸ¤– æ¨¡å‹åç§°

| æ¨¡å‹åç§° | çŠ¶æ€ |
|---------|------|
| `gpt-image-1.5` | âœ… å¯ç”¨ |
| `gpt-image-1` | âœ… å¯ç”¨ |
| `gpt-image-1-mini` | âœ… å¯ç”¨ |
| `dall-e-3` | âŒ æœ¬èº«ä¸æ”¯æŒ |


## ğŸ’» Python ä»£ç ç¤ºä¾‹
```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-

"""
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                         DMXAPI å›¾ç‰‡ç¼–è¾‘å·¥å…·                                  â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  åŠŸèƒ½è¯´æ˜ï¼šä½¿ç”¨ DMXAPI çš„å›¾ç‰‡ç¼–è¾‘æ¥å£å¯¹å›¾ç‰‡è¿›è¡Œ AI æ™ºèƒ½ç¼–è¾‘å¤„ç†                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
"""

import base64
import json
import os
import requests
from datetime import datetime


# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘                              å›¾ç‰‡æ–‡ä»¶é…ç½®                                     â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

image_paths = [
    "output/generated_image_20251107_120453_1.png",  # ç¬¬ä¸€å¼ å›¾ç‰‡è·¯å¾„
    # "/path/to/image2.png",                         # ç¬¬äºŒå¼ å›¾ç‰‡è·¯å¾„ï¼ˆå¯é€‰ï¼‰
    # "/path/to/image3.png",                         # ç¬¬ä¸‰å¼ å›¾ç‰‡è·¯å¾„ï¼ˆå¯é€‰ï¼‰
]

"""
é‡è¦æç¤º - ä¸åŒæ¨¡å‹å¯¹å›¾ç‰‡çš„è¦æ±‚ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   gpt-image     â”‚ â€¢ æ”¯æŒå¤šå¼ å›¾ç‰‡ï¼ˆæœ€å¤š 16 å¼ ï¼‰                           â”‚
â”‚                 â”‚ â€¢ æ–‡ä»¶å¤§å°ï¼š< 50MB                                    â”‚
â”‚                 â”‚ â€¢ æ”¯æŒæ ¼å¼ï¼špngã€webpã€jpg                            â”‚
â”‚                 â”‚ â€¢ å°ºå¯¸ï¼šæ— é™åˆ¶                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
"""
# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘                               API é…ç½®                                        â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# DMXAPI ç«¯ç‚¹åœ°å€
url = "https://www.dmxapi.cn/v1/images/edits"

# DMXAPI å¯†é’¥ï¼ˆè¯·æ›¿æ¢ä¸ºæ‚¨è‡ªå·±çš„å¯†é’¥ï¼‰
api_key = "sk-******************************************"

# HTTP è¯·æ±‚å¤´é…ç½®
headers = {
    "Authorization": f"{api_key}"  # Token è®¤è¯
}


# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘                            è¯·æ±‚å‚æ•°é…ç½®                                       â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

payload = {
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # ã€å¿…å¡«å‚æ•°ã€‘æ¨¡å‹åç§°
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    "model": "gpt-image-1.5",  # æ¨¡å‹åç§°
    
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # ã€å¿…å¡«å‚æ•°ã€‘ç¼–è¾‘æŒ‡ä»¤
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    "prompt": "ç»™å“ªå’å¸¦ä¸Šä¸€ä¸ªçº¢è‰²çš„é¸­èˆŒå¸½,é£æ ¼ä¿æŒä¸å˜",
    
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # ã€å¯é€‰å‚æ•°ã€‘ç”Ÿæˆå›¾åƒçš„å°ºå¯¸
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # â€¢ gpt-image    æ”¯æŒï¼š
    #   - 1024x1024  (æ–¹å½¢)
    #   - 1536x1024  (æ¨ªç‰ˆ)
    #   - 1024x1536  (ç«–ç‰ˆ)
    #   - auto       (é»˜è®¤ï¼Œè‡ªåŠ¨é€‰æ‹©)
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    "size": "1024x1024",
    
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # ã€å¯é€‰å‚æ•°ã€‘èƒŒæ™¯é€æ˜åº¦è®¾ç½®ï¼ˆä»… gpt-image æ”¯æŒï¼‰
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # â€¢ transparent - é€æ˜èƒŒæ™¯
    # â€¢ opaque      - ä¸é€æ˜èƒŒæ™¯
    # â€¢ auto        - è‡ªåŠ¨é€‰æ‹©ï¼ˆé»˜è®¤ï¼‰
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    "background": "auto",
    
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # ã€å¯é€‰å‚æ•°ã€‘è¾“å…¥å›¾åƒä¿çœŸåº¦ï¼ˆä»… gpt-image æ”¯æŒï¼Œä¸æ”¯æŒ gpt-image-1-miniï¼‰
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # æ§åˆ¶æ¨¡å‹åŒ¹é…è¾“å…¥å›¾åƒé£æ ¼å’Œç‰¹å¾çš„ç¨‹åº¦ï¼ˆå°¤å…¶æ˜¯é¢éƒ¨ç‰¹å¾ï¼‰
    # â€¢ high - é«˜ä¿çœŸåº¦ï¼ˆæ›´è´´è¿‘åŸå›¾ï¼‰
    # â€¢ low  - ä½ä¿çœŸåº¦ï¼ˆé»˜è®¤ï¼Œæ›´æœ‰åˆ›é€ æ€§ï¼‰
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # "input_fidelity": "low",
    
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # ã€å¯é€‰å‚æ•°ã€‘è¾“å‡ºå›¾åƒå‹ç¼©çº§åˆ«ï¼ˆä»… gpt-image æ”¯æŒï¼‰
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # å–å€¼èŒƒå›´ï¼š0-100
    # â€¢ 0   - æœ€ä½è´¨é‡ï¼ˆæœ€å°æ–‡ä»¶å¤§å°ï¼‰
    # â€¢ 100 - æœ€é«˜è´¨é‡ï¼ˆæœ€å¤§æ–‡ä»¶å¤§å°ï¼‰
    # âš ï¸ æ³¨æ„ï¼šä»…åœ¨è¾“å‡ºæ ¼å¼ä¸º webp æˆ– jpeg æ—¶æœ‰æ•ˆ
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    "output_compression": 100,
    
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # ã€å¯é€‰å‚æ•°ã€‘è¾“å‡ºå›¾åƒæ ¼å¼ï¼ˆä»… gpt-image æ”¯æŒï¼‰
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # â€¢ png  - PNG æ ¼å¼ï¼ˆé»˜è®¤ï¼Œæ”¯æŒé€æ˜ï¼‰
    # â€¢ jpeg - JPEG æ ¼å¼ï¼ˆä¸æ”¯æŒé€æ˜ï¼Œæ–‡ä»¶æ›´å°ï¼‰
    # â€¢ webp - WebP æ ¼å¼ï¼ˆç°ä»£æ ¼å¼ï¼Œå‹ç¼©ç‡é«˜ï¼‰
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    "output_format": "png",
    
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # ã€å¯é€‰å‚æ•°ã€‘å›¾åƒè´¨é‡
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # â€¢ gpt-image   æ”¯æŒï¼š
    #   - high   (é«˜è´¨é‡)
    #   - medium (ä¸­ç­‰è´¨é‡)
    #   - low    (ä½è´¨é‡)
    #   - auto   (è‡ªåŠ¨ï¼Œé»˜è®¤)
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    "quality": "auto",
    
}


# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘                            å‡†å¤‡å›¾ç‰‡æ–‡ä»¶                                       â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

files = []

# éå†é…ç½®çš„å›¾ç‰‡è·¯å¾„åˆ—è¡¨ï¼Œå‡†å¤‡ä¸Šä¼ æ–‡ä»¶
for img_path in image_paths:
    try:
        # ä»å®Œæ•´è·¯å¾„ä¸­æå–æ–‡ä»¶å
        file_name = img_path.split("/")[-1]
        
        # æ ¹æ®æ–‡ä»¶æ‰©å±•åè‡ªåŠ¨åˆ¤æ–­ MIME ç±»å‹
        mime_type = "image/png" if img_path.lower().endswith(".png") else "image/jpeg"
        
        # å°†æ–‡ä»¶æ·»åŠ åˆ°ä¸Šä¼ åˆ—è¡¨
        # æ ¼å¼ï¼š(å‚æ•°å, (æ–‡ä»¶å, æ–‡ä»¶å¯¹è±¡, MIMEç±»å‹))
        files.append(
            ("image",                   # API è¦æ±‚çš„å›ºå®šå‚æ•°å
             (file_name,                # åŸå§‹æ–‡ä»¶å
              open(img_path, "rb"),     # ä»¥äºŒè¿›åˆ¶åªè¯»æ¨¡å¼æ‰“å¼€æ–‡ä»¶
              mime_type)                # æ–‡ä»¶çš„ MIME ç±»å‹
            )
        )
        
    except FileNotFoundError:
        # æ–‡ä»¶ä¸å­˜åœ¨æ—¶çš„é”™è¯¯å¤„ç†
        print(f"âš ï¸  è­¦å‘Š: æ–‡ä»¶æœªæ‰¾åˆ° - {img_path}")
        
    except Exception as e:
        # å…¶ä»–å¼‚å¸¸çš„é”™è¯¯å¤„ç†
        print(f"âš ï¸  è­¦å‘Š: å¤„ç†æ–‡ä»¶æ—¶å‡ºé”™ - {img_path}: {str(e)}")


# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘                          å‘é€è¯·æ±‚å¹¶å¤„ç†å“åº”                                   â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

if not files:
    # å¦‚æœæ²¡æœ‰æˆåŠŸåŠ è½½ä»»ä½•å›¾ç‰‡æ–‡ä»¶
    print("âŒ é”™è¯¯: æ²¡æœ‰å¯ç”¨çš„å›¾ç‰‡æ–‡ä»¶")
    
else:
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # å‘é€ HTTP POST è¯·æ±‚åˆ° DMXAPI
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    response = requests.post(
        url,              # API ç«¯ç‚¹
        headers=headers,  # è¯·æ±‚å¤´ï¼ˆåŒ…å«è®¤è¯ä¿¡æ¯ï¼‰
        data=payload,     # è¯·æ±‚å‚æ•°
        files=files       # ä¸Šä¼ çš„å›¾ç‰‡æ–‡ä»¶
    )
    
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # å¤„ç† API å“åº”
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    if response.status_code == 200:
        # âœ… è¯·æ±‚æˆåŠŸï¼ˆHTTP 200ï¼‰
        try:
            # è§£æ JSON æ ¼å¼çš„å“åº”æ•°æ®
            data = response.json()
            
            # ç¡®ä¿è¾“å‡ºç›®å½•å­˜åœ¨ï¼ˆå¦‚ä¸å­˜åœ¨åˆ™åˆ›å»ºï¼‰
            output_dir = "output"
            os.makedirs(output_dir, exist_ok=True)
            
            # éªŒè¯å“åº”æ•°æ®ç»“æ„æ˜¯å¦ç¬¦åˆé¢„æœŸ
            if data.get("data") and isinstance(data["data"], list):
                # ç”Ÿæˆæ—¶é—´æˆ³ä½œä¸ºæ–‡ä»¶åçš„ä¸€éƒ¨åˆ†ï¼ˆæ ¼å¼ï¼šYYYYMMDD_HHMMSSï¼‰
                timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
                
                # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                # éå†å¤„ç†æ‰€æœ‰è¿”å›çš„ç¼–è¾‘åå›¾ç‰‡
                # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                for idx, item in enumerate(data["data"]):
                    # æå– Base64 ç¼–ç çš„å›¾ç‰‡æ•°æ®
                    image_b64 = item.get("b64_json")
                    
                    if image_b64:
                        # ç”Ÿæˆè¾“å‡ºæ–‡ä»¶å
                        # å¤šå¼ å›¾ç‰‡æ—¶ï¼šedited_æ—¶é—´æˆ³_åºå·.png
                        # å•å¼ å›¾ç‰‡æ—¶ï¼šedited_æ—¶é—´æˆ³.png
                        if len(data["data"]) > 1:
                            filename = f"edited_{timestamp}_{idx + 1}.png"
                        else:
                            filename = f"edited_{timestamp}.png"
                            
                        # æ„å»ºå®Œæ•´çš„è¾“å‡ºè·¯å¾„
                        output_path = os.path.join(output_dir, filename)
                        
                        # è§£ç  Base64 æ•°æ®å¹¶ä¿å­˜ä¸ºå›¾ç‰‡æ–‡ä»¶
                        with open(output_path, "wb") as f:
                            f.write(base64.b64decode(image_b64))
                        
                        print(f"âœ… å›¾ç‰‡ä¿å­˜æˆåŠŸ: {output_path}")
                    else:
                        print(f"âš ï¸  æœªè·å–åˆ°ç¬¬ {idx + 1} å¼ å›¾ç‰‡æ•°æ®")
                        
            else:
                # å“åº”æ•°æ®æ ¼å¼ä¸æ­£ç¡®
                print("âŒ å“åº”æ•°æ®ç»“æ„å¼‚å¸¸")
                print(f"ğŸ“„ åŸå§‹å“åº”: {json.dumps(data, indent=2, ensure_ascii=False)}")
                
        except json.JSONDecodeError:
            # JSON è§£æå¤±è´¥
            print("âŒ JSON è§£æå¤±è´¥")
            print(f"ğŸ“„ åŸå§‹å“åº”: {response.text}")
            
    else:
        # âŒ è¯·æ±‚å¤±è´¥ï¼ˆHTTP çŠ¶æ€ç é 200ï¼‰
        print(f"âŒ è¯·æ±‚å¤±è´¥: HTTP {response.status_code}")
        print(f"ğŸ“„ å“åº”å†…å®¹: {response.text}")
```

## ğŸ“¤ è¿”å›å‚æ•°

æ‰§è¡ŒæˆåŠŸåå°†è¿”å›å¦‚ä¸‹ç»“æœï¼š

```json
âœ… å›¾ç‰‡ä¿å­˜æˆåŠŸ: output\edited_20251107_134527.png
```

---

<p align="center">
  <small>Â© 2025 DMXAPI GPTå›¾ç‰‡</small>
</p>