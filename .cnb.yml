main:
  push:
    - imports: https://cnb.cool/dmxapi/claude-code-my/-/blob/main/env.yml
      stages:
        - name: sync to github
          image: tencentcom/git-sync
          settings:
            target_url: https://github.com/YeSongYun/dmxapi.doc.git
            auth_type: https
            username: ${GIT_USERNAME}
            password: ${GIT_ACCESS_TOKEN}
            force: true
  pull_request:
    - stages:
        - name: code-review
          image: cnbcool/code-review:latest
          settings:
            context: 10
            comment: true
            max_comments: 10
            fail_on_critical: false
